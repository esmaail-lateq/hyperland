# ๐ฅ ูุธุงู ุงูุฃุฏูุงุฑ ุงูุฌุฏูุฏ - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ูุธุงู ุงูุฃุฏูุงุฑ ูู ุงูููุตุฉ ููุฏุนู ุซูุงุซุฉ ุฃุฏูุงุฑ ุฑุฆูุณูุฉ ูุน ุตูุงุญูุงุช ูุญุฏุฏุฉ ููุงุถุญุฉ.

## ๐ฏ ุงูุฃุฏูุงุฑ ุงูุฌุฏูุฏุฉ

### **1. ุงููุฏูุฑ ุงูุฑุฆูุณู (Admin)**
- **ุงูุตูุงุญูุงุช ุงููุงููุฉ** ูู ุงููุธุงู
- **ุงูููุงููุฉ ุนูู ุงููุญุชูู**: ุงูุณูุงุฑุงุช ููุทุน ุงูุบูุงุฑ
- **ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**: ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐูุ ุชูุนูู/ุฅูุบุงุก ุชูุนูู
- **ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ**: ุชุบููุฑ ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู
- **ุฅุถุงูุฉ ุงููุญุชูู**: ุงูุณูุงุฑุงุช ููุทุน ุงูุบูุงุฑ
- **ุงููุตูู ูุฌููุน ุงูุฃูุณุงู** ูู ุงููุธุงู

### **2. ุงููุฏูุฑ ุงููุฑุนู (Sub Admin)**
- **ุฅุถุงูุฉ ุงููุญุชูู**: ุงูุณูุงุฑุงุช ููุทุน ุงูุบูุงุฑ
- **ุนุฑุถ ุงููุญุชูู**: ุชุตูุญ ุงูุณูุงุฑุงุช ููุทุน ุงูุบูุงุฑ ุงููุนุชูุฏุฉ
- **ูุง ููููู ุงูููุงููุฉ** ุนูู ุงููุญุชูู
- **ูุง ููููู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**
- **ูุง ููููู ุชุบููุฑ ุงูุฃุฏูุงุฑ**

### **3. ุงููุณุชุฎุฏู ุงูุนุงู (Public User)**
- **ุฅุถุงูุฉ ุงููุญุชูู**: ุงูุณูุงุฑุงุช ููุทุน ุงูุบูุงุฑ
- **ุนุฑุถ ุงููุญุชูู**: ุชุตูุญ ุงูุณูุงุฑุงุช ููุทุน ุงูุบูุงุฑ ุงููุนุชูุฏุฉ
- **ุฅุฏุงุฑุฉ ุงูููุถูุฉ**: ุฅุถุงูุฉ/ุฅุฒุงูุฉ ูู ุงูููุถูุฉ
- **ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู**
- **ูุง ููููู ุงูููุงููุฉ** ุนูู ุงููุญุชูู
- **ูุง ููููู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **ุฌุฏูู ุงููุณุชุฎุฏููู ุงููุญุฏุซ:**
```sql
users:
- id (primary key)
- name (string)
- email (string, unique)
- password (string, hashed)
- role (enum: 'admin', 'sub_admin', 'public_user')
- status (enum: 'active', 'inactive')
- phone (string, nullable)
- avatar (string, nullable)
- slug (string, nullable)
- email_verified_at (timestamp, nullable)
- remember_token (string, nullable)
- created_at (timestamp)
- updated_at (timestamp)
```

## ๐ง ุงููููุงุช ุงููุญุฏุซุฉ

### **1. ุงูููุงุฐุฌ (Models):**
- `app/Models/User.php` - ุชุญุฏูุซ ูุงูู ูุน ุงูุฏูุงู ุงูุฌุฏูุฏุฉ

### **2. Controllers:**
- `app/Http/Controllers/Admin/UserManagementController.php` - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `app/Http/Controllers/UnifiedCarController.php` - ุชุญุฏูุซ ุงูุตูุงุญูุงุช

### **3. Middleware:**
- `app/Http/Middleware/AdminMiddleware.php` - ุชุญุฏูุซ ููุนูู ูุน ุงููุธุงู ุงูุฌุฏูุฏ
- `app/Http/Middleware/ApprovalMiddleware.php` - ุฌุฏูุฏ ููุชุญูู ูู ุตูุงุญูุงุช ุงูููุงููุฉ

### **4. Migrations:**
- `database/migrations/2025_01_15_000000_update_user_roles_system.php`
- `database/seeders/UpdateUserRolesSeeder.php`

### **5. Views:**
- `resources/views/admin/users/index.blade.php` - ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- `resources/views/admin/users/create.blade.php` - ุฅุถุงูุฉ ูุณุชุฎุฏู
- `resources/views/admin/users/edit.blade.php` - ุชุนุฏูู ูุณุชุฎุฏู

## ๐ก๏ธ ูุธุงู ุงูุตูุงุญูุงุช

### **ุฏูุงู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช:**
```php
// ุงูุชุญูู ูู ููู ุงููุณุชุฎุฏู ูุฏูุฑ ุฑุฆูุณู
$user->isAdmin()

// ุงูุชุญูู ูู ููู ุงููุณุชุฎุฏู ูุฏูุฑ ูุฑุนู
$user->isSubAdmin()

// ุงูุชุญูู ูู ููู ุงููุณุชุฎุฏู ูุณุชุฎุฏู ุนุงู
$user->isPublicUser()

// ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูููุงููุฉ ุนูู ุงููุญุชูู
$user->canApproveContent()

// ุงูุชุญูู ูู ุตูุงุญูุฉ ุฅุถุงูุฉ ุงููุญุชูู
$user->canAddContent()

// ุงูุชุญูู ูู ุตูุงุญูุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
$user->canManageUsers()

// ุงูุชุญูู ูู ููู ุงููุณุชุฎุฏู ูุดุท
$user->isActive()
```

### **ุฎุตุงุฆุต ุงูุนุฑุถ:**
```php
// ุงุณู ุงูุฏูุฑ ุจุงูุนุฑุจูุฉ
$user->role_display_name

// ุงุณู ุงูุญุงูุฉ ุจุงูุนุฑุจูุฉ
$user->status_display_name

// ูุฆุฉ CSS ููุฏูุฑ
$user->role_badge_class

// ูุฆุฉ CSS ููุญุงูุฉ
$user->status_badge_class
```

## ๐จ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู

### **ุงูููุฒุงุช ุงููุชุงุญุฉ:**
- **ูุงุฆูุฉ ุงููุณุชุฎุฏููู** ูุน ุงูุจุญุซ ูุงูุชุตููุฉ
- **ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ** ูุน ุชุญุฏูุฏ ุงูุฏูุฑ ูุงูุญุงูุฉ
- **ุชุนุฏูู ูุนูููุงุช ุงููุณุชุฎุฏู** ูุชุบููุฑ ุงูุฏูุฑ
- **ุชูุนูู/ุฅูุบุงุก ุชูุนูู** ุงููุณุชุฎุฏููู
- **ุญุฐู ุงููุณุชุฎุฏููู** (ูุน ุญูุงูุฉ ุงููุฏูุฑ ุงูุฃุฎูุฑ)
- **ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏููู**

### **ุงูุตูุงุญูุงุช ูู ุงููุงุฌูุฉ:**
- **ููุท ุงููุฏูุฑ ุงูุฑุฆูุณู** ููููู ุงููุตูู ูุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- **ุญูุงูุฉ ุงููุฏูุฑ ูู ุญุฐู ููุณู**
- **ุญูุงูุฉ ุงููุฏูุฑ ุงูุฃุฎูุฑ** ูู ุงูุญุฐู
- **ููุน ุฅูุบุงุก ุชูุนูู ุงููุฏูุฑ ูููุณู**

## ๐ ุงูุฃูุงู ูุงูุญูุงูุฉ

### **ุญูุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
- **Validation** ูุฌููุน ุงููุฏุฎูุงุช
- **Unique constraints** ููุจุฑูุฏ ุงูุฅููุชุฑููู
- **Enum constraints** ููุฃุฏูุงุฑ ูุงูุญุงูุงุช

### **ุญูุงูุฉ ุงูุชุทุจูู:**
- **Middleware** ููุชุญูู ูู ุงูุตูุงุญูุงุช
- **Authorization** ูู ุฌููุน ุงูุนูููุงุช
- **CSRF Protection** ูุฌููุน ุงูููุงุฐุฌ

### **ุญูุงูุฉ ุงููุฏูุฑ:**
- **ููุน ุญุฐู ุงููุฏูุฑ ุงูุฃุฎูุฑ**
- **ููุน ุฅูุบุงุก ุชูุนูู ุงููุฏูุฑ ูููุณู**
- **ููุน ุชุบููุฑ ุฏูุฑ ุงููุฏูุฑ ูููุณู**

## ๐ ุงูุฅุญุตุงุฆูุงุช

### **ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏููู:**
- ุฅุฌูุงูู ุนุฏุฏ ุงููุณุชุฎุฏููู
- ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุดุทูู
- ุนุฏุฏ ุงููุณุชุฎุฏููู ุบูุฑ ุงููุดุทูู
- ุนุฏุฏ ุงููุฏูุฑูู ุงูุฑุฆูุณููู
- ุนุฏุฏ ุงููุฏูุฑูู ุงููุฑุนููู
- ุนุฏุฏ ุงููุณุชุฎุฏููู ุงูุนุงููู

## ๐ ุงูุงุณุชุฎุฏุงู

### **ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ:**
1. ุงููุตูู ูุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (ุงููุฏูุฑ ุงูุฑุฆูุณู ููุท)
2. ุงูููุฑ ุนูู "ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ"
3. ููุก ุงููููุฐุฌ ูุน ุชุญุฏูุฏ:
   - ุงูุงุณู ุงููุงูู
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ูููุฉ ุงููุฑูุฑ
   - ุงูุฏูุฑ (admin/sub_admin/public_user)
   - ุงูุญุงูุฉ (active/inactive)
   - ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู)

### **ุชุนุฏูู ูุณุชุฎุฏู:**
1. ุงูููุฑ ุนูู "ุชุนุฏูู" ุจุฌุงูุจ ุงููุณุชุฎุฏู
2. ุชุญุฏูุซ ุงููุนูููุงุช ุงููุทููุจุฉ
3. ุชุบููุฑ ูููุฉ ุงููุฑูุฑ (ุงุฎุชูุงุฑู)
4. ุญูุธ ุงูุชุบููุฑุงุช

### **ุฅุฏุงุฑุฉ ุญุงูุฉ ุงููุณุชุฎุฏู:**
- **ุชูุนูู/ุฅูุบุงุก ุชูุนูู**: ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- **ุญุฐู ุงููุณุชุฎุฏู**: ูุน ุชุฃููุฏ ุงูุญุฐู

## ๐ ุงูุชุญุฏูุซ ูู ุงููุธุงู ุงููุฏูู

### **Migration:**
```bash
php artisan migrate
```

### **Seeder:**
```bash
php artisan db:seed --class=UpdateUserRolesSeeder
```

### **ุงูุชุญุฏูุซ ุงูุชููุงุฆู:**
- **ุงููุฏูุฑูู ุงูุณุงุจููู** โ `admin`
- **ุงูุชุฌุงุฑ ุงูุณุงุจููู** โ `sub_admin`
- **ุงููุณุชุฎุฏููู ุงูุนุงุฏููู** โ `public_user`

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### **ูุดุงูู ุดุงุฆุนุฉ:**

#### 1. ุฎุทุฃ ูู ุงูุตูุงุญูุงุช
```
ุบูุฑ ูุตุฑุญ ูู ุจุงููุตูู ููุฐู ุงูุตูุญุฉ
```
**ุงูุญู**: ุชุฃูุฏ ูู ููู ุงููุณุชุฎุฏู ูุฏูุฑ ุฑุฆูุณู

#### 2. ุฎุทุฃ ูู ุงูููุงููุฉ
```
ุบูุฑ ูุตุฑุญ ูู ุจุงูููุงููุฉ ุนูู ุงููุญุชูู
```
**ุงูุญู**: ุชุฃูุฏ ูู ููู ุงููุณุชุฎุฏู ูุฏูุฑ ุฑุฆูุณู

#### 3. ุฎุทุฃ ูู ุญุฐู ุงููุฏูุฑ ุงูุฃุฎูุฑ
```
ูุง ูููู ุญุฐู ุงููุฏูุฑ ุงูุฃุฎูุฑ ูู ุงููุธุงู
```
**ุงูุญู**: ุฃูุดุฆ ูุฏูุฑ ุขุฎุฑ ูุจู ุญุฐู ุงููุฏูุฑ ุงูุญุงูู

### **ุณุฌูุงุช ุงูุฃุฎุทุงุก:**
```bash
# ุนุฑุถ ุณุฌูุงุช Laravel
tail -f storage/logs/laravel.log

# ุงูุจุญุซ ุนู ุฃุฎุทุงุก ุงูุตูุงุญูุงุช
grep "ุบูุฑ ูุตุฑุญ" storage/logs/laravel.log
```

## ๐ ุงูุฏุนู

### **ูุนูููุงุช ุงูุงุชุตุงู:**
- **ุงููุทูุฑ**: ูุฑูู ุงูุชุทููุฑ
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: support@example.com

### **ุฑูุงุจุท ูููุฏุฉ:**
- [Laravel Authorization](https://laravel.com/docs/authorization)
- [Laravel Middleware](https://laravel.com/docs/middleware)
- [Laravel Validation](https://laravel.com/docs/validation)

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ ูุฑูู Auto-Market** ๐๐ฅ 